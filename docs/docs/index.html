
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>OrisonJS</title>
    <script src="/app.js"></script>
    <link rel="stylesheet" type="text/css" href="/app.css">

    <link rel="stylesheet" href="/highlightjs/github.css">
    <script src="/highlightjs/highlight.pack.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Orison server and static stite generator documentation">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#fa5d0f">

    <!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="OrisonJS">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="OrisonJS">

    <!-- Homescreen icons -->
    <link rel="apple-touch-icon" href="icons/icon-640x640.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">

    <!-- Tile icon for Windows 8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="icons/icon-512x512.png">
    <meta name="msapplication-TileColor" content="#fa5d0f">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Default twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@username">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="orison">
    <meta property="og:image" content="icons/icon-512x512.png" />
  </head>
  <body>
    
  <header>
    
  <h1>OrisonJS</h1>

    <div>
      <img src="/icons/icon-256x256.png">
    </div>
    <p>A static site generator and server based upon lit-html</p>
  </header>

    
  <nav>
    <div>
      <a href="/" class="">Begin</a>
      
        <a href="/docs" class="active">Docs</a>
      
        <a href="/blog" class="">Blog</a>
      
    </div>
  </nav>

    <main>
      <section><h2>Single pages</h2>
<h4>/src/pages/example.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  ...
`
</code></pre>
</section>
<section><h2>List pages</h2>
<h4>/src/pages/list.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default (context, slug) =&gt; [
  {
    name: 'path-segment-1',
    html: html`...`
  },
  {
    name: 'path-segment-2',
    html: html`...`
  }
  ...
]
</code></pre>
<p>In the below example we load in a list of blog posts with a made up loadContent
method. It is important to remember that when doing <code>orison build</code> the slug
parameter will be undefined and when doing <code>orison serve</code> it will be the last
path segment in the url. This way <code>orison serve</code> can only load in the data
it needs for the currently requested page and <code>orison build</code> can build every
page available from your content provider. This logic will need implemented
differently depending on what content provider you are using, and is hidden
inside the <code>loadContent</code> method in this example.</p>
<h4>/src/pages/list.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default async (context, slug) =&gt; {
  const blogPosts = await loadContent(slug);

  blogPosts.map(blogPost =&gt; ({
    name: blogPost.urlName,
    html: html`
      ...
    `
  );
}
</code></pre>
</section>
<section><h2>Partials</h2>
<h4>/src/partials/example.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default data =&gt; html`
  ...
`
</code></pre>
</section>
<section><h2>Layouts</h2>
<h4>/src/pages/layout.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;OrisonJS&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div&gt;Website header&lt;/div&gt;
    ${context.page.html}
    &lt;div&gt;Website footer&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
`;
</code></pre>
</section>
<section><h2>Context</h2>
<pre><code>context.path
context.data
context.local
context.parent
context.root
context.parents
context.children
context.mdString
context.mdFile
</code></pre>
<p>The local, parent, and root properties return <code>OrisonDirectory</code> objects. The
parents and children return arrays of <code>OrisonDirectory</code> objects.</p>
<h3>Child Directories</h3>
<p>The <code>context.local.children</code> property provides an array of <code>OrisonDirectory</code> objects
Each item in the array has the following attributes and methods:</p>
<p>These attributes give you access to the child data.json files, the
path of each child, and the <code>parent</code> and <code>children</code> methods can be used to
programmatically navigate the site structure.</p>
<p>The order of the children will be based on the <code>orison.order</code> property of the
corresponding data.json files as shown below.</p>
<h4>/src/pages/first/data.json</h4>
<pre><code class="language-json">{
  &quot;orison&quot;: {
    &quot;order&quot;: 100
  }
}
</code></pre>
<h4>/src/pages/second/data.json</h4>
<pre><code class="language-json">{
  &quot;orison&quot;: {
    &quot;order&quot;: 200
  }
}
</code></pre>
<p>In this example the /src/pages/first directory will be the first child in the array, and
the /src/pages/second directory will be the second child in the array. It is recommended
to use larger numbers so that you can reorder directories without having to
increment each directory.</p>
<p>This can then be used to create navigation elements as shown below. In this example
we are creating the navigation links by getting the children of the root directory.</p>
<h4>/src/pages/index.js</h4>
<pre><code class="language-js">const { html } = require('orison');

export default context =&gt; html`
  &lt;a href=&quot;/&quot; class=&quot;${context.page.path === '/index.js' ? 'active' : ''}&quot;&gt;Begin&lt;/a&gt;
  ${context.local.children.map(child =&gt; html`
    &lt;a href=&quot;${child.path}&quot;
       class=&quot;${context.page.path.startsWith(child.path) ? 'active' : ''}&quot;&gt;
       ${child.data.title}
    &lt;/a&gt;
  `)}
`;
</code></pre>
<p>The context object is also available from html files as well.</p>
<h4>/src/pages/index.html</h4>
<pre><code class="language-html">&lt;a href=&quot;/&quot; class=&quot;${context.page.path === '/index.js' ? 'active' : ''}&quot;&gt;Begin&lt;/a&gt;
${context.local.children.map(child =&gt; html`
  &lt;a href=&quot;${child.path}&quot;
     class=&quot;${context.page.path.startsWith(child.path) ? 'active' : ''}&quot;&gt;
     ${child.data.title}
  &lt;/a&gt;
`)}
</code></pre>
<h3>Root Directory</h3>
<pre><code class="language-js">export default context =&gt; html`
  ${context.root}
`
</code></pre>
<h3>Parent Directories</h3>
<pre><code class="language-js">export default context =&gt; html`
  ${context.parents}
`
</code></pre>
</section>
<section><h2>Metadata</h2>
<p>Metadata file are data.json files under the /src/pages hierarchy. They are made
available to pages through the context API. The only restraint to the json file
is that &quot;orison&quot; is a reserved top level key:</p>
<h4>/src/pages/data.json</h4>
<pre><code class="language-json">{
  ...
  &quot;orison&quot;: {
    &quot;order&quot;: 100
  }
}
</code></pre>
<p>The only reserved key is the &quot;order&quot; key which determines the order
of the <code>children</code> context property.</p>
</section>
<section><h2>Programatic Usage</h2>
<p>Instead of installing OrisonJS as a command line utility you can install it as a project dependency. Then you can interact with a configurable and programatic API for building and serving your site.</p>
<pre><code class="language-bash">npm install orison
</code></pre>
<p>You can require the CommonJS module from 'orison'.
ES6 Modules are available from './node_modules/orison/bin/orison-esm.js'</p>
<h3>Static site generation</h3>
<p>Here is an example of programmatically building the src directory into the docs directory.</p>
<pre><code class="language-js">const { OrisonGenerator } = require('orison');
const orisonGenerator = new OrisonGenerator({ rootPath: __dirname });
orisonGenerator.build();
</code></pre>
<h3>Static serving</h3>
<p>Here is an example of serving the statically built files.</p>
<pre><code class="language-js">const { OrisonStaticServer } = require('orison');
const orisonStaticServer = new OrisonStaticServer({ rootPath: __dirname });
orisonStaticServer.start();
</code></pre>
<h3>Server side generation</h3>
<p>Here is an example of serving files and rendering the file during each request.</p>
<pre><code class="language-js">const { OrisonServer } = require('orison');
const orisonServer = new OrisonServer({ rootPath: __dirname });
orisonServer.start();
</code></pre>
<h3>Custom command line utility</h3>
<p>Or you could create a file that builds, serves, or serves static based on provided command line arguments.</p>
<pre><code class="language-js">const { OrisonGenerator, OrisonServer, OrisonStaticServer } = require('orison');

if (process.argv.includes('build'))
  new OrisonGenerator({ rootPath: __dirname }).build();

if (process.argv.includes('serve'))
  new OrisonServer({ rootPath: __dirname }).start();

if (process.argv.includes('static'))
  new OrisonStaticServer({ rootPath: __dirname }).start();
</code></pre>
<p>Then you can build, serve, or serve static with these commands:</p>
<pre><code class="language-bash">node ./orison.js build
node ./orison.js serve
node ./orison.js static
</code></pre>
</section>

    </main>
    
  <footer>
    <h3>OrisonJS</h3>
    <p>
      Status: pre-release
      <br>
      <a href="https://github.com/megazear7/orison">Github</a> -
      <a href="https://www.npmjs.com/package/orison">npm</a> -
      <a href="/license.html">License</a> -
      <a href="/about.html">About</a>
    </p>
    <p>
      Author: <a href="https://www.alexlockhart.me">Alex Lockhart</a>
    </p>
    <p>
      Icons made by
      <a href="https://www.freepik.com/" title="Freepik">Freepik</a>
      from
      <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
      are licensed by
      <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
    </p>
  </footer>

  </body>
</html>
