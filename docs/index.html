
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>OrisonJS</title>
    <script src="/app.js"></script>
    <link rel="stylesheet" type="text/css" href="/app.css">

    <link rel="stylesheet" href="/highlightjs/github.css">
    <script src="/highlightjs/highlight.pack.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Orison server and static stite generator documentation">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#fa5d0f">

    <!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="OrisonJS">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="OrisonJS">

    <!-- Homescreen icons -->
    <link rel="apple-touch-icon" href="icons/icon-640x640.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">

    <!-- Tile icon for Windows 8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="icons/icon-512x512.png">
    <meta name="msapplication-TileColor" content="#fa5d0f">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Default twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@username">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="orison">
    <meta property="og:image" content="icons/icon-512x512.png" />
  </head>
  <body>
    
  <header>
    
  <h1>OrisonJS</h1>

    <div>
      <img src="/icons/icon-256x256.png">
    </div>
    <p>A static site generator and server based upon lit-html</p>
  </header>

    
  <nav>
    <div>
      <a href="/" class="active">Begin</a>
      <a href="/documentation.html" class="">Docs</a>
      <a href="/blog.html" class="">Blog</a>
    </div>
  </nav>

    <main>
      
  <section><h2>Setup</h2>
<pre><code class="language-bash">npm install -g orison
orison init my-project
cd my-project
npm install

# Build the /src directory into the /docs directory
npx orison build

# Serve the files from the /docs directory
npx orison serve

# Your new website is available at localhost:3000
</code></pre>
</section>
  <section><h2>Getting Started</h2>
<h3>Project Organization</h3>
<p>An OrisonJS project should have a <code>src</code> directory in the root of the project with three sub directories</p>
<ul>
<li>/src/pages</li>
<li>/src/partials</li>
<li>/src/static</li>
</ul>
<h3>Using Orison</h3>
<ul>
<li><code>orison init my-project</code> Initialize a new project</li>
<li><code>npx orison serve</code> Serve the source files with live changes</li>
<li><code>npx orison build</code> Build the static site</li>
<li><code>npx orison static</code> Serve the static site</li>
</ul>
<h3>Creating your first page</h3>
<p>With a few exceptions for layouts and lists, any JavaScript, HTML, or Markdown files under the /src/pages directory will be rendered as an html file at the same location but under the /docs directory.</p>
<p>JavaScript pages should return a lit-html template. Html files will be interpreted as a lit-html template. Markdown files will be rendered as is.</p>
<p>Below is an example page. Notice that it exports a function which takes no parameters and returns a template.</p>
<h4>/src/pages/example.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  &lt;h1&gt;This is an example page&lt;/h1&gt;
`;
</code></pre>
<p>Or you could define this same page with an html file instead of a JavaScript file:</p>
<h4>/src/pages/example.html</h4>
<pre><code class="language-html">&lt;h1&gt;This is an example page&lt;/h1&gt;
</code></pre>
<p>Or you could write this same page as a markdown file:</p>
<h4>/src/pages/example.md</h4>
<pre><code class="language-md"># This is an example page
</code></pre>
<h3>Enhancing pages with layouts</h3>
<p>Layouts can be used to provide html that should exist on every page. Layouts should export a method which takes a page template and then renders a full html page. For example if you could create the following layout.js file:</p>
<h4>/src/pages/layout.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;OrisonJS&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div&gt;Website header&lt;/div&gt;
    ${context.page.html}
    &lt;div&gt;Website footer&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
`;
</code></pre>
<p>The closest layout to the rendered page will be used for that page. So for example if you have only one layout.js file and it is directly in the /src/pages directory, it will be used for rendering every page. If a layout.js exists closer in the /src/pages directory hierarchy to the rendered page, it will be used instead.</p>
<p>Any pages defined as an HTML file will automatically be inserted into the closest layout.js file that exists within the /src/pages directory structure.</p>
<h3>Utilizing index files</h3>
<p>Any file named with the &quot;index&quot; base name will be returned by the server for the url that matches the directory that it is in. For example the following file will be available at localhost:3000 when the server is running, <em>not</em> localhost:3000/index.html. Most web servers that serve static files will behave in the same way.</p>
<h4>/src/pages/index.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  &lt;h1&gt;This is an example index page&lt;/h1&gt;
`;
</code></pre>
<h3>List Pages</h3>
<p>You can also have a single JS file produce multiple pages. This is useful for connecting to a content provider such as <a href="https://www.contentful.com">Contentful</a> and producing a web page for each item from a query. In the example below we are creating a list of blog posts.</p>
<h4>/src/pages/list.js</h4>
<pre><code class="language-js">import { html } from 'orison';
import client from '../../contentful.js';

export default async (context, slug) =&gt; {
  const blogPosts = await loadContent(slug);

  return blogPosts.items.map(blogPost =&gt; ({
    name: blogPost.slug,
    html: html`
      &lt;section&gt;
        &lt;h3&gt;${blogPost.title}&lt;/h3&gt;
        ${context.mdString(blogPost.body)}
      &lt;/section&gt;
    `
  }));
};
</code></pre>
<p>Notice that an array of url segments and html templates is returned. Each will corresponding to the given html page at the url created with the given name.</p>
<p>When doing <code>npx orison build</code> no url slug will be provided because all returned entries will be created as html pages. When using the orison serve command, only the request page should be generated and so the corresponding url slug is provided to the list page, which should use this slug to retrieve and return only the page needed for the given url slug.</p>
<h3>Making reusable partials</h3>
<p>If you need reusable chunks of html you can create partials under /src/partials. These partial files should export a method which excepts some parameters and returns an html template. For example we could create the following file:</p>
<h4>/src/partials/title.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default title =&gt; html`
  &lt;h1&gt;${title}&lt;/h1&gt;
`;
</code></pre>
<p>And then use this partial in our page and reuse wherever it is needed.</p>
<h4>/src/pages/index.js</h4>
<pre><code class="language-js">import { html } from 'orison';
import title from '../partials/title.js';

export default context =&gt; html`
  ${title('This is an example page')}
`;
</code></pre>
<p>Note that because the partial's definition is outside of the page hierarchy and needs to be capable of accepting parameters it must be defined as a JS file and not an html file.</p>
<h3>The static directory</h3>
<p>Finally, any files in the /src/static directory will get copied as is into the src directory during the build. If running the live server these will be available at the same location under the root of the url. So for example the following css and js files will be available at the specified url:</p>
<ul>
<li>/src/static/main.css =&gt; localhost:3000/main.css</li>
<li>/src/static/main.js =&gt; localhost:3000/main.js</li>
</ul>
<h3>Fragments</h3>
<p>Each page will also have a corresponding &quot;fragment&quot; built. A fragment is the same content as the page, but without the layout applied. This allows you to do client side navigation, loading in page content from the browser JavaScript without requiring full page refreshes. This also allows you to use the system as an API for content. By default the initial projects come with single page application style relative linking, loading in only the new page fragment.</p>
<p>For example for the following urls:</p>
<ol>
<li>/index.html</li>
<li>/info/about.html</li>
<li>/my-first-blog-post.html</li>
<li>/another-blog-post.html</li>
</ol>
<p>There will also be these urls with the same page content but without the layout applied:</p>
<ol>
<li>/index.fragment.html</li>
<li>/info/about.fragment.html</li>
<li>/my-first-blog-post.fragment.html</li>
<li>/another-blog-post.fragment.html</li>
</ol>
<h3>Utilizing Metadata</h3>
<h5>Global Metadata</h5>
<p>The data in the <code>global.json</code> file of the pages directory will be available on a
<code>global</code> property of the context object. This is available for all pages, list
pages, and layouts regardless of where they exist in the pages directory.</p>
<h4>/src/pages/global.js</h4>
<pre><code class="language-json">{
  &quot;title&quot;: &quot;Hello, World!&quot;
}
</code></pre>
<h4>/src/pages/index.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  &lt;h1&gt;${context.global.title}&lt;/h1&gt;
`;
</code></pre>
<h5>Contextual Metadata</h5>
<p>Any <code>data.json</code> file in the pages directory will be available on a <code>data</code> property
of the context object for pages, list pages, and layouts in the same directory.</p>
<h4>/src/pages/example/data.js</h4>
<pre><code class="language-json">{
  &quot;message&quot;: &quot;This is available in the example directory.&quot;
}
</code></pre>
<h4>/src/pages/example/index.js</h4>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  &lt;p&gt;${context.data.message}&lt;/p&gt;
`;
</code></pre>
<h5>Parent Metadata</h5>
<p>The <code>context.parentData</code> property is an array of the data.json files starting
from the one in the current directory and then proceeding towards the root pages
directory. In addition a <code>path</code> property is added to each data object in the array.</p>
<pre><code class="language-js">import { html } from 'orison';

export default context =&gt; html`
  ${context.parentData.map(data =&gt; html`
    &lt;a href=&quot;${data.path}&quot;&gt;${data.title}&lt;/a&gt;
  `)}
`;
</code></pre>
</section>
  <section><h2>Production Build</h2>
<p>The production ready build of your website can be performed as follows:</p>
<pre><code class="language-bash">npx orison build

# The source files in /src will be built as static files into /docs
# These folder names are configurable.

npx orison static

# The production version of the site will be available at localhost:3000
</code></pre>
</section>
  <section>
    <p>OrisonJS utilizes the following JavaScript libraries:
    </p>
    <ol>
      <li><a href="https://github.com/popeindustries/lit-html-server">lit-html-server</a></li>
      <li><a href="https://github.com/Polymer/lit-html">lit-html</a></li>
      <li><a href="https://github.com/expressjs/express">express</a></li>
      <li><a href="https://github.com/markdown-it/markdown-it">markdown-it</a></li>
    </ol>
  </section>

    </main>
    
  <footer>
    <h3>OrisonJS</h3>
    <p>
      Status: pre-release
      <br>
      <a href="https://github.com/megazear7/orison">Github</a> -
      <a href="https://www.npmjs.com/package/orison">npm</a> -
      <a href="/license.html">License</a> -
      <a href="/info/about.html">About</a>
    </p>
    <p>
      Author: <a href="https://www.alexlockhart.me">Alex Lockhart</a>
    </p>
    <p>
      Icons made by
      <a href="https://www.freepik.com/" title="Freepik">Freepik</a>
      from
      <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
      are licensed by
      <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
    </p>
  </footer>

  </body>
</html>
